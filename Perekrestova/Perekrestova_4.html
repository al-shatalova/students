<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
	<script>
		var dil_arr = [];
		var player_arr = [];

		var arr = [2,3,4,5,6,7,8,9,10,'Q','J','K','T'];

		var dil_summ;
		var player_summ;


		function arrayRandElement(arr) {
		    var rand = Math.floor(Math.random() * arr.length-1);
		    return arr[rand];
		}
		function start(){
			
			dil_summ=0;
		    player_summ=0;

			for (i=0; i<=2;i++){
				dil_arr[i]=arrayRandElement(arr);
				player_arr[i]=arrayRandElement(arr);
			}

			document.getElementById("dil_cards").value=dil_arr[0]+" *";
			document.getElementById("player_cards").value = player_arr[0]+" "+player_arr[1]+" ";

			

			for (i=0; i<=0;i++){
				if (dil_arr[i]>0){
					dil_summ+= parseInt(dil_arr[i]);
				}
				else if (dil_arr[i]=="J"){
					dil_summ+=10;

				}
				else if (dil_arr[i]=="Q"){
					dil_summ+=10;

				}
				else if (dil_arr[i]=="K"){
					dil_summ+=10;

				}
				else if (dil_arr[i]=="T"){
					dil_summ+=11;

				}
			}

			for (i=0; i<=1;i++){
				if (player_arr[i]>0){
					player_summ+= parseInt(player_arr[i]);
				}
				else if (player_arr[i]=="J"){
					player_summ+=10;

				}
				else if (player_arr[i]=="Q"){
					player_summ+=10;

				}
				else if (player_arr[i]=="K"){
					player_summ+=10;

				}
				else if (player_arr[i]=="T"){
					player_summ+=11;

				}
			}

			document.getElementById("dil_summ").value=dil_summ;
			document.getElementById("player_summ").value = player_summ;

		}

		function more_player(){
			if (document.getElementById("player_summ").value>21)
				alert("вы проиграли!");
			else{
				player_arr.push(arrayRandElement(arr));
			

				document.getElementById("player_cards").value += player_arr[player_arr.length-1]+" ";

				if (player_arr[player_arr.length-1]>0){
						player_summ+= parseInt(player_arr[player_arr.length-1]);
					}
					else if (player_arr[player_arr.length-1]=="J"){
						player_summ+=10;

					}
					else if (player_arr[player_arr.length-1]=="Q"){
						player_summ+=10;

					}
					else if (player_arr[player_arr.length-1]=="K"){
						player_summ+=10;

					}
					else if (player_arr[player_arr.length-1]=="T"){
						player_summ+=11;

					}
					document.getElementById("player_summ").value = player_summ;
			}
			


		}
		function stop_player(){
			if (player_summ==21)
				{alert("Вы выиграли!!!")}
			else if (player_summ>21)
				{alert("Вы проиграли!")}
			else if (player_summ<21){
				document.getElementById("dil_cards").value=dil_arr[0]+" "+dil_arr[1]+" ";
				dil_summ=0;
				for (i=0; i<=1;i++){
					if (dil_arr[i]>0){
						dil_summ+= parseInt(dil_arr[i]);
					}
					else if (dil_arr[i]=="J"){
						dil_summ+=10;

					}
					else if (dil_arr[i]=="Q"){
						dil_summ+=10;

					}
					else if (dil_arr[i]=="K"){
						dil_summ+=10;

					}
					else if (dil_arr[i]=="T"){
						dil_summ+=11;

					}
				}
				document.getElementById("dil_summ").value=dil_summ;

				while (dil_summ<18){
					player_arr.push(arrayRandElement(arr));
			

					document.getElementById("dil_cards").value += dil_arr[dil_arr.length-1]+" ";

					if (dil_arr[dil_arr.length-1]>0){
							dil_summ+= parseInt(dil_arr[dil_arr.length-1]);
						}
						else if (dil_arr[dil_arr.length-1]=="J"){
							dil_summ+=10;

						}
						else if (dil_arr[dil_arr.length-1]=="Q"){
							dil_summ+=10;

						}
						else if (dil_arr[dil_arr.length-1]=="K"){
							dil_summ+=10;

						}
						else if (dil_arr[dil_arr.length-1]=="T"){
							dil_summ+=11;

						}
						document.getElementById("dil_summ").value = dil_summ;
				}
				document.getElementById("dil_summ").value=dil_summ;

				if (dil_summ==21){alert("Дилер выиграл ;(")}
				else if (dil_summ<21){
					if (dil_summ<player_summ){alert("Вы выиграли!!!")}
					else if (dil_summ>player_summ){alert("Дилер выиграл ")}
					else if (dil_summ=player_summ){alert("Ничья")}
				} 
				else if (dil_summ>21){alert("Вы выиграли!")}


			}


		}

	</script>
</head>
<body>
	<table width="1200" border="0" cellpadding="5" cellspacing="0">
   <col width="350" valign="top">
   <col width="350" valign="top">
   <tr>
   	<td style="background: #B0B28E"><h1 align="center">Дилер</h1></td>
   	<td style="background: #CCCCCC"><h1 align="center">Игрок</h1></td>
   </tr>
   <tr>
    <td style="background: #B0B28E">
    	<h2>Ваши карты: </h2><br>
    	<textarea id="dil_cards" cols="30" rows="10"></textarea>
    	<br>

    	<h4 >Сумма ваших карт: </h4><input type="text" id="dil_summ">
    	<br>

    </td>
    <td style="background: #CCCCCC">
    	<h2 >Ваши карты: </h2><br>
    	<textarea id="player_cards" cols="30" rows="10"></textarea>
    	<br>

    	<h4 >Сумма ваших карт: </h4><input type="text" id="player_summ">
    	<br>

    	<input type="button" value="Еще" onclick="more_player()">

    	<input type="button" value="Хватит" onclick="stop_player()">
    </td>
    
   </tr>
  </table><br>
  <div align="center">
  	<input  type="button" value="Начать новую игру" onclick="start()">
  </div>
  
	
</body>
</html>